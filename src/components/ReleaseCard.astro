---
const {
  name,
  version,
  date,
  downloadUrl,
  downloadLabel = 'Download (external)',
  pendingLabel = 'Download coming soon',
  notes = [],
  checksum
} = Astro.props;

const hasActionSlot = Astro.slots.has('action');
---

<article class="release-card">
  <div class="release-head">
    <h3>{name}</h3>
    <p>{version} | {date}</p>
  </div>

  {downloadUrl ? (
    <a class="button button-primary" href={downloadUrl} target="_blank" rel="noreferrer">
      {downloadLabel}
    </a>
  ) : hasActionSlot ? (
    <div class="release-action">
      <slot name="action" />
    </div>
  ) : (
    <p class="release-pending">{pendingLabel}</p>
  )}

  {notes.length > 0 && (
    <ul class="release-notes-list">
      {notes.map((note: string) => <li>{note}</li>)}
    </ul>
  )}

  {checksum && (
    <p class="checksum">
      {checksum.algo}: <code>{checksum.value}</code>
    </p>
  )}
</article>
